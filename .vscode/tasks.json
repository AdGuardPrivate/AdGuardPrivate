{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "customize build init",
            "type": "shell",
            "command": "bash customize-init.sh"
        },
        {
            "label": "simple build",
            "type": "shell",
            "command": "bash customize-build.sh"
        },
        {
            "label": "3.1 build release",
            "type": "shell",
            "command": "sudo make build-release VERBOSE=2 CHANNEL='release' VERSION='v1.1.0' ARCH='amd64 arm64' OS='linux' SIGN='0'"
        },
        {
            "label": "3.2 docker build release",
            "type": "shell",
            "command": "make build-docker VERBOSE=2 CHANNEL='release' VERSION='v1.1.0' DOCKER_IMAGE_NAME='adguardprivate' DOCKER_OUTPUT='type=image'"
        },
        {
            "label": "3.3 push to dev.jqknono.com/adguardprivate:v1.1.0",
            "type": "shell",
            "command": "make build-docker VERBOSE=2 CHANNEL='release' VERSION='v1.1.0' DOCKER_IMAGE_NAME='dev.jqknono.com:34005/adguardprivate' DOCKER_OUTPUT='type=image,name=dev.jqknono.com:34005/adguardprivate:v1.1.0,push=true'"
        },
        {
            "label": "3.4 push to docker.io/jqknono/adguardprivate:v1.1.0",
            "type": "shell",
            "command": "make build-docker VERBOSE=2 CHANNEL='release' VERSION='v1.1.0' DOCKER_IMAGE_NAME='jqknono/adguardprivate' DOCKER_OUTPUT='type=image,name=docker.io/jqknono/adguardprivate:v1.1.0,push=true'"
        },
        {
            "label": "3.5 push to aliyuncs/adguardprivate/adguardprivate:v1.1.0",
            "type": "shell",
            "command": "make build-docker VERBOSE=2 CHANNEL='release' VERSION='v1.1.0' DOCKER_IMAGE_NAME='registry.cn-hangzhou.aliyuncs.com/adguardprivate/adguardprivate' DOCKER_OUTPUT='type=image,name=registry.cn-hangzhou.aliyuncs.com/adguardprivate/adguardprivate:v1.1.0,push=true'"
        },
        {
            "label": "git commit no verified",
            "type": "shell",
            "command": "git commit --no-verify -m 'jqknono commit'"
        },
        {
            "label": "2.1 docker build dev",
            "type": "shell",
            "command": "make build-docker VERBOSE=2 CHANNEL='development' VERSION='v1.1.0' DOCKER_IMAGE_NAME='adguardhome-dev' DOCKER_OUTPUT='type=docker,dest=-' VERBOSE=2"
        },
        {
            "label": "2.2 docker load dev",
            "type": "shell",
            "command": "docker load -i ./adguardhome-dev.tar"
        },
        {
            "label": "2.3 docker run dev",
            "type": "shell",
            "command": "docker run --name adguardhome-dev -d -p 50000:3000 -p 50001:80 -p 50002:443 -p 50003:853 -p 50004:53/udp -v ./data/work:/opt/adguardhome/work -v ./data/conf:/opt/adguardhome/conf adguardhome-dev:latest"
        },
        {
            "label": "1.0 quick build",
            "type": "shell",
            "command": "sudo make quick-build VERBOSE=2 "
        },
        {
            "label": "1.1 build front",
            "type": "shell",
            "command": "sudo make js-build VERBOSE=2 "
        },
        {
            "label": "1.2 build AdguardHome",
            "type": "shell",
            "command": "sudo make go-build VERBOSE=2 CHANNEL='development' VERSION='v1.1.0' ARCH='amd64' OS='linux' SIGN='0'"
        },
        {
            "label": "1.3 copy AdguardHome",
            "type": "shell",
            "command": "sudo cp ./AdGuardHome ./build/AdGuardHome"
        },
        {
            "label": "1.4 run AdguardHome",
            "type": "shell",
            "command": "sudo ./build/AdGuardHome -c AdGuardHome.yaml -w ./build/work --web-addr 0.0.0.0:50005 --local-frontend --no-check-update"
        }
    ]
}